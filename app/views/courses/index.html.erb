<p id="notice"><%= notice %></p>
<%= render 'courses/search_form.html.erb' %>

<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead>
      <tr>
        <th scope="col"><%= sort_link(@q, :name, 'Course Name', default_order: :asc) %> </th>
        <th scope="col"><%= sort_link(@q, :description, 'Description', default_order: :asc) %>  </th>
        <th scope="col"><%= sort_link(@q, :status, 'Status', default_order: :asc) %> </th>
        <th scope="col"><%= sort_link(@q, :students_count, 'Students count', default_order: :asc) %> </th>
        <th scope="col">Links</th>
      </tr>
    </thead>
    <tbody>
      <% @courses.each do |course| %>
        <tr>
          <td><%= course.name.truncate(40)%></td>
          <td><%=course.description.truncate(40) %></td>
          <td><%= course.status %></td>
          <td><%= course.students.size %></td>
          <td>
            <%= link_to 'Show', course %>
            <% if policy(Course).update?  %>
              <%= link_to 'Update', edit_course_path(course) %>
            <% end%>
            <% if policy(Course).destroy?  %>
              <%= link_to 'Destroy', course, method: :delete, data: { confirm: 'Are you sure?' } %>
            <% end%>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% if policy(Course).create?  %>
    <%= link_to 'New Course', new_course_path %>
  <% end%>
  <%= link_to 'Dashboard', root_path%>
</div>
